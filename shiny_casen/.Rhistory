runApp('casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
library(shiny); runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
data_code_1[89, 2] <- 6110
data_code_1[89, 2] <- 6110
dataset2006  <- readRDS("dataset2006.rds")
data_codigos_comunales_2006 <- dataset2006
#ab <- dataset2006_react()
ab <- data_codigos_comunales_2006
data_code <- ab[  , c("seg", "comuna")]
names(data_code)[2] <- "a"
data_code <- distinct(data_code , a, .keep_all = TRUE)
# https://stackoverflow.com/questions/22337394/dplyr-mutate-with-conditional-values/22337459
data_code  <-  data_code  %>% mutate(codigo = case_when(as.integer(seg / 10000000) == 0 ~ as.integer(seg / 1000)
, as.integer(seg / 10000000) == 1 ~ as.integer(seg / 1000)
))
data_code_1 <- subset( data_code, select = -seg )
data_code_1[89, 2] <- 6110
data_code_1
data_code_1[89, 2] <- 6110
data_code_1[92, 2] <- 6114
data_code_1[96, 2] <- 6303
data_code_1[269, 2] <- 11101
data_code_1[18, 2] <- 2203
data_code_1[287, 2] <- 13104
data_code_1[292, 2] <- 13110
data_code_1
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
library(shiny); runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
dataset2013 <- readRDS("dataset2013.rds")
# a <- input$ptabla2013_primeravx
#     b <- input$ptabla2013_segundavx
#     c <- input$ptabla2013_terceravx
#     d <- input$ptabla2013_cuartavx
#
#     ab <- dataset2013
#
#     aa <- ab[,a]
#     bb <- ab[,b]
#     cc <- ab[,c]
#     dd <- ab[,d]
a <- ab$comuna
dataset2013 <- readRDS("dataset2013.rds")
# a <- input$ptabla2013_primeravx
#     b <- input$ptabla2013_segundavx
#     c <- input$ptabla2013_terceravx
#     d <- input$ptabla2013_cuartavx
#
ab <- dataset2013
#
#     aa <- ab[,a]
#     bb <- ab[,b]
#     cc <- ab[,c]
#     dd <- ab[,d]
a <- ab$comuna
b <- ab$e1
c <- ab$sexo
d <- ab$ecivil
cross_tab = table(aa, bb, cc, dd)
dataset2013 <- readRDS("dataset2013.rds")
# a <- input$ptabla2013_primeravx
#     b <- input$ptabla2013_segundavx
#     c <- input$ptabla2013_terceravx
#     d <- input$ptabla2013_cuartavx
#
ab <- dataset2013
#
#     aa <- ab[,a]
#     bb <- ab[,b]
#     cc <- ab[,c]
#     dd <- ab[,d]
a <- ab$comuna
b <- ab$e1
c <- ab$sexo
d <- ab$ecivil
cross_tab = table(a, b, c, d)
tabla <- as.data.frame(cross_tab)
d <-tabla[!(tabla$Freq == 0),]
d$anio <- "2013"
# return(d)
# aa <- ab[,a]
# bb <- ab[,b]
# cc <- ab[,c]
# dd <- ab[,d]
#cross_tab = table(aa, bb, cc, dd)
# #################################################################################
# #################################################################################
# tabla <- as.data.frame(cross_tab)
#
ab <- data_codigos_comunales_2006
dataset2013 <- readRDS("dataset2013.rds")
# a <- input$ptabla2013_primeravx
#     b <- input$ptabla2013_segundavx
#     c <- input$ptabla2013_terceravx
#     d <- input$ptabla2013_cuartavx
#
ab <- dataset2013
#
#     aa <- ab[,a]
#     bb <- ab[,b]
#     cc <- ab[,c]
#     dd <- ab[,d]
a <- ab$comuna
b <- ab$e1
c <- ab$sexo
d <- ab$ecivil
cross_tab = table(a, b, c, d)
tabla <- as.data.frame(cross_tab)
d <-tabla[!(tabla$Freq == 0),]
d$anio <- "2013"
# return(d)
data_code <- ab[  , c("seg", "comuna")]
dataset2013 <- readRDS("dataset2013.rds")
# a <- input$ptabla2013_primeravx
#     b <- input$ptabla2013_segundavx
#     c <- input$ptabla2013_terceravx
#     d <- input$ptabla2013_cuartavx
#
ab <- dataset2013
#
#     aa <- ab[,a]
#     bb <- ab[,b]
#     cc <- ab[,c]
#     dd <- ab[,d]
a <- ab$comuna
b <- ab$e1
c <- ab$sexo
d <- ab$ecivil
cross_tab = table(a, b, c, d)
tabla <- as.data.frame(cross_tab)
d <-tabla[!(tabla$Freq == 0),]
d$anio <- "2013"
# return(d)
data_code <- ab[  , c("folio", "comuna")]
#
names(data_code)[2] <- "a"
data_code <- distinct(data_code , a, .keep_all = TRUE)
#
data_code <- data_code %>% mutate(a = str_squish(a))
#
# # https://stackoverflow.com/questions/22337394/dplyr-mutate-with-conditional-values/22337459
#
data_code  <-  data_code  %>% mutate(codigo = case_when(as.integer(folio / 10000000) == 0 ~ as.integer(folio / 1000)
, as.integer(folio / 10000000) == 1 ~ as.integer(folio / 1000)
))
data_code <- subset( data_code, select = -folio )
names(d)[1] <- "a"
df = merge( x = d, y = data_code, by = "a", all.x = TRUE)
df
dataset2013 <- readRDS("dataset2013.rds")
# a <- input$ptabla2013_primeravx
#     b <- input$ptabla2013_segundavx
#     c <- input$ptabla2013_terceravx
#     d <- input$ptabla2013_cuartavx
#
ab <- dataset2013
#
#     aa <- ab[,a]
#     bb <- ab[,b]
#     cc <- ab[,c]
#     dd <- ab[,d]
a <- ab$comuna
b <- ab$e1
c <- ab$sexo
d <- ab$ecivil
cross_tab = table(a, b, c, d)
tabla <- as.data.frame(cross_tab)
d <-tabla[!(tabla$Freq == 0),]
d$anio <- "2013"
# return(d)
data_code <- ab[  , c("folio", "comuna")]
#
names(data_code)[2] <- "a"
data_code <- distinct(data_code , a, .keep_all = TRUE)
#
data_code <- data_code %>% mutate(a = str_squish(a))
#
# # https://stackoverflow.com/questions/22337394/dplyr-mutate-with-conditional-values/22337459
#
data_code <- data_code %>% mutate(codigo = case_when(as.integer(segmento / 10000000) == 0 ~ as.integer(segmento/ 10000)
, as.integer(segmento / 10000000) <17 ~ as.integer(segmento / 10000)
))
dataset2013 <- readRDS("dataset2013.rds")
# a <- input$ptabla2013_primeravx
#     b <- input$ptabla2013_segundavx
#     c <- input$ptabla2013_terceravx
#     d <- input$ptabla2013_cuartavx
#
ab <- dataset2013
#
#     aa <- ab[,a]
#     bb <- ab[,b]
#     cc <- ab[,c]
#     dd <- ab[,d]
a <- ab$comuna
b <- ab$e1
c <- ab$sexo
d <- ab$ecivil
cross_tab = table(a, b, c, d)
tabla <- as.data.frame(cross_tab)
d <-tabla[!(tabla$Freq == 0),]
d$anio <- "2013"
# return(d)
data_code <- ab[  , c("folio", "comuna")]
#
names(data_code)[2] <- "a"
data_code <- distinct(data_code , a, .keep_all = TRUE)
#
data_code <- data_code %>% mutate(a = str_squish(a))
#
# # https://stackoverflow.com/questions/22337394/dplyr-mutate-with-conditional-values/22337459
#
data_code <- data_code %>% mutate(codigo = case_when(as.integer(folio / 10000000) == 0 ~ as.integer(folio/ 10000)
, as.integer(folio / 10000000) <17 ~ as.integer(folio / 10000)
))
data_code <- subset( data_code, select = -folio )
names(d)[1] <- "a"
df = merge( x = d, y = data_code, by = "a", all.x = TRUE)
df
dataset2013 <- readRDS("dataset2013.rds")
# a <- input$ptabla2013_primeravx
#     b <- input$ptabla2013_segundavx
#     c <- input$ptabla2013_terceravx
#     d <- input$ptabla2013_cuartavx
#
ab <- dataset2013
#
#     aa <- ab[,a]
#     bb <- ab[,b]
#     cc <- ab[,c]
#     dd <- ab[,d]
a <- ab$comuna
b <- ab$e1
c <- ab$sexo
d <- ab$ecivil
cross_tab = table(a, b, c, d)
tabla <- as.data.frame(cross_tab)
d <-tabla[!(tabla$Freq == 0),]
d$anio <- "2013"
# return(d)
data_code <- ab[  , c("folio", "comuna")]
#
names(data_code)[2] <- "a"
data_code <- distinct(data_code , a, .keep_all = TRUE)
#
data_code <- data_code %>% mutate(a = str_squish(a))
#
# # https://stackoverflow.com/questions/22337394/dplyr-mutate-with-conditional-values/22337459
#
data_code <- data_code %>% mutate(codigo = case_when(as.integer(folio / 10000000000) == 0 ~ as.integer(folio/ 10000000)
, as.integer(folio / 10000000000) <17 ~ as.integer(folio / 10000000)
))
data_code <- subset( data_code, select = -folio )
names(d)[1] <- "a"
df = merge( x = d, y = data_code, by = "a", all.x = TRUE)
df
dataset2013 <- readRDS("dataset2013.rds")
# a <- input$ptabla2013_primeravx
#     b <- input$ptabla2013_segundavx
#     c <- input$ptabla2013_terceravx
#     d <- input$ptabla2013_cuartavx
#
ab <- dataset2013
#
#     aa <- ab[,a]
#     bb <- ab[,b]
#     cc <- ab[,c]
#     dd <- ab[,d]
a <- ab$comuna
b <- ab$e1
c <- ab$sexo
d <- ab$ecivil
cross_tab = table(a, b, c, d)
tabla <- as.data.frame(cross_tab)
d <-tabla[!(tabla$Freq == 0),]
d$anio <- "2013"
# return(d)
data_code <- ab[  , c("folio", "comuna")]
#
names(data_code)[2] <- "a"
data_code <- distinct(data_code , a, .keep_all = TRUE)
#
data_code <- data_code %>% mutate(a = str_squish(a))
#
# # https://stackoverflow.com/questions/22337394/dplyr-mutate-with-conditional-values/22337459
#
data_code <- data_code %>% mutate(codigo = case_when(as.integer(folio / 10000000000) == 0 ~ as.integer(folio/ 10000000)
, as.integer(folio / 10000000000) <17 ~ as.integer(folio / 10000000)
))
data_code <- subset( data_code, select = -folio )
data_cod[171,2]<-16101
dataset2013 <- readRDS("dataset2013.rds")
# a <- input$ptabla2013_primeravx
#     b <- input$ptabla2013_segundavx
#     c <- input$ptabla2013_terceravx
#     d <- input$ptabla2013_cuartavx
#
ab <- dataset2013
#
#     aa <- ab[,a]
#     bb <- ab[,b]
#     cc <- ab[,c]
#     dd <- ab[,d]
a <- ab$comuna
b <- ab$e1
c <- ab$sexo
d <- ab$ecivil
cross_tab = table(a, b, c, d)
tabla <- as.data.frame(cross_tab)
d <-tabla[!(tabla$Freq == 0),]
d$anio <- "2013"
# return(d)
data_code <- ab[  , c("folio", "comuna")]
#
names(data_code)[2] <- "a"
data_code <- distinct(data_code , a, .keep_all = TRUE)
#
data_code <- data_code %>% mutate(a = str_squish(a))
#
# # https://stackoverflow.com/questions/22337394/dplyr-mutate-with-conditional-values/22337459
#
data_code <- data_code %>% mutate(codigo = case_when(as.integer(folio / 10000000000) == 0 ~ as.integer(folio/ 10000000)
, as.integer(folio / 10000000000) <17 ~ as.integer(folio / 10000000)
))
data_cod <- subset( data_code, select = -folio )
data_cod[171,2]<-16101
data_cod[172,2]<-16102
data_cod[173,2]<-16202
data_cod[174,2]<-16203
data_cod[175,2]<-16302
data_cod[176,2]<-16103
data_cod[177,2]<-16104
data_cod[178,2]<-16204
data_cod[179,2]<-16303
data_cod[180,2]<-16105
data_cod[181,2]<-16106
data_cod[182,2]<-16205
data_cod[183,2]<-16107
data_cod[184,2]<-16201
data_cod[185,2]<-16206
data_cod[186,2]<-16301
data_cod[187,2]<-16304
data_cod[188,2]<-16108
data_cod[189,2]<-16305
data_cod[190,2]<-16207
data_cod[191,2]<-16109
names(d)[1] <- "a"
df = merge( x = d, y = data_cod, by = "a", all.x = TRUE)
df
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
knitr::opts_chunk$set(echo = TRUE)
suppressWarnings(library(RODBC))
library(ggplot2)
library(ggpubr)
library(markdown)
library(shiny)
library(shinythemes)
library(tidyverse)
library(magrittr)
library(lubridate)
library(plotly)
library(xts)
library(dygraphs)
library(kableExtra)
library(knitr)
library("readxl")
library(rsconnect)
library(dplyr)
library(summarytools)
library(epiDisplay)
#library(leaflet)
library(haven)
library(epiDisplay)
library("readxl")
library(expss)
library(hrbrthemes)
library(viridis)
library(viridisLite)
library(DescTools)
library(roperators)
library(shinycssloaders)
library(writexl)
library(labelled)
library(tidyverse)
library(haven)
library(readr)
library(sjmisc)
library(WriteXLS)
library(readstata13)
dataset2017  <- readRDS("dataset2017.rds")
dataset2017  <- readRDS("dataset2017.rds")
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
gini (dataset2017$y0101)
suppressWarnings(library(RODBC))
library(ggplot2)
library(ggpubr)
library(markdown)
library(shiny)
library(shinythemes)
library(tidyverse)
library(magrittr)
library(lubridate)
library(plotly)
library(xts)
library(dygraphs)
library(kableExtra)
library(knitr)
library("readxl")
library(rsconnect)
library(dplyr)
library(summarytools)
library(epiDisplay)
#library(leaflet)
library(haven)
library(epiDisplay)
library("readxl")
library(expss)
library(hrbrthemes)
library(viridis)
library(viridisLite)
library(DescTools)
library(roperators)
library(shinycssloaders)
library(writexl)
library(labelled)
library(tidyverse)
library(haven)
library(readr)
library(sjmisc)
library(WriteXLS)
library(reldist)
library(readstata13)
gini (dataset2017$y0101)
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
gini(dataset2017$y0101)
gini(dataset2017$y0101)
dataset2017$y0101
gini(dataset2017$y0101, na.rm = FALSE)
gini(dataset2017$y0101, na.rm = T)
install.packages("ineq")
suppressWarnings(library(RODBC))
library(ggplot2)
library(ggpubr)
library(markdown)
library(shiny)
library(shinythemes)
library(tidyverse)
library(magrittr)
library(lubridate)
library(plotly)
library(xts)
library(dygraphs)
library(kableExtra)
library(knitr)
library("readxl")
library(rsconnect)
library(dplyr)
library(summarytools)
library(epiDisplay)
#library(leaflet)
library(haven)
library(epiDisplay)
library("readxl")
library(expss)
library(hrbrthemes)
library(viridis)
library(viridisLite)
library(DescTools)
library(roperators)
library(shinycssloaders)
library(writexl)
library(labelled)
library(tidyverse)
library(haven)
library(readr)
library(sjmisc)
library(WriteXLS)
library("ineq")
library(reldist)
library(readstata13)
#dataset2017$y0101
ineq(dataset2017$y0101,type="Gini")
plot(Lc(dataset2017$y0101))
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
library(shiny); runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
library(shiny); runApp('C:/Users/usuario/Desktop/castro_shiny/shiny_casen/casen_rojo.R')
library(shiny); runApp('casen_rojo.R')
library("BBmisc")
runApp('casen_rojo.R')
